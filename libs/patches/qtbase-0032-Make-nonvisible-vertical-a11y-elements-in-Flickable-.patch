From 48bfe401bd3c0860c7b8c457595e5141b9ca8e74 Mon Sep 17 00:00:00 2001
From: Jens Trillmann <jens.trillmann@governikus.de>
Date: Mon, 29 Sep 2025 17:25:38 +0200
Subject: Make nonvisible vertical a11y elements in Flickable not FKA
 accessible

When navigating an app using FKA elements of Flickables can be selected
by FKA even if they are currently not on screen anymore, e.g. when they
are behind a title bar or a footer. This leads to unintuitive behavior,
as FKA prefers to focus the scrolled invisible elements instead of the
visible title bar or footer elements.
To combat this by only allowing FKA focus on elements that are completely
inside the Flickable rect. We make an exception for horizontal flickables,
as they are needed for e.g. landing page horizontal Flickables.
---
 .../platforms/ios/quiaccessibilityelement.mm  | 28 ++++++++++++++++++-
 1 file changed, 27 insertions(+), 1 deletion(-)

diff --git x/qtbase/src/plugins/platforms/ios/quiaccessibilityelement.mm y/qtbase/src/plugins/platforms/ios/quiaccessibilityelement.mm
index f446e18ac4965e67833a7d6155c0a111213bdbcb..47d6ae56779b01af023dcd3c0f0caf6cc0d4ab70 100644
--- x/qtbase/src/plugins/platforms/ios/quiaccessibilityelement.mm
+++ y/qtbase/src/plugins/platforms/ios/quiaccessibilityelement.mm
@@ -401,7 +401,33 @@ struct RotorNameTranslator {
 
 - (BOOL)canBecomeFocused
 {
-    return YES;
+    QAccessibleInterface *iface = QAccessible::accessibleInterface(self.axid);
+    if (!iface || !iface->isValid()) {
+        qWarning() << "invalid accessible interface for: " << self.axid;
+        return NO;
+    }
+    QAccessibleInterface *parentIface = iface->parent();
+    while (parentIface) {
+        if (!parentIface || !parentIface->isValid()) {
+            return YES;
+        }
+        const auto accessibleRole = parentIface->role();
+        if (accessibleRole == QAccessible::ScrollBar) {
+            break;
+        }
+        parentIface = parentIface->parent();
+    }
+
+    if (!parentIface) {
+        return YES;
+    }
+
+    QRect itemRect = iface->rect();
+    QRect parentRect = parentIface->rect();
+
+    bool strict_vertical_outside = itemRect.y() < parentRect.y()
+        || itemRect.y() + itemRect.height() > parentRect.y() + parentRect.height();
+    return !strict_vertical_outside;
 }
 
 @end
