From 5f39800dd2bdc189f422431dbddc994974dc5057 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andr=C3=A9=20Klitzing?= <aklitzing@gmail.com>
Date: Tue, 26 Aug 2025 15:47:33 +0200
Subject: Fix broadcasts with dual-stack IPv6

This amends 55d58e1d5a936ef3daa970665423a50a4f80118b.

Fixes: QTBUG-139586
Task-number: QTBUG-130070
Pick-to: 6.10 6.9 6.8 6.5
Change-Id: I4ddb9327e066415e5922aeaa7add7655ca2b17ff
Reviewed-by: Thiago Macieira <thiago.macieira@intel.com>
(cherry picked from commit daeb703dea77cb20e02f24c5f76daeb0fbda5c68)
---
 src/network/socket/qnativesocketengine.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git x/qtbase/src/network/socket/qnativesocketengine.cpp y/qtbase/src/network/socket/qnativesocketengine.cpp
index 14fc7c9c3f7329fbfe3d418991dbf7fa72baeafb..ca6281f85dbfdb780954970dbb9fdab2028bb5b4 100644
--- x/qtbase/src/network/socket/qnativesocketengine.cpp
+++ y/qtbase/src/network/socket/qnativesocketengine.cpp
@@ -431,7 +431,7 @@ bool QNativeSocketEngine::initialize(QAbstractSocket::SocketType socketType, QAb
     if (socketType == QAbstractSocket::UdpSocket) {
         // Set the broadcasting flag if it's a UDP socket.
         // IPv6 does not support broadcast â€” only set option for IPv4
-        if (protocol == QAbstractSocket::IPv4Protocol) {
+        if (protocol != QAbstractSocket::IPv6Protocol) {
             if (!setOption(BroadcastSocketOption, 1)) {
                 d->setError(QAbstractSocket::UnsupportedSocketOperationError,
                             QNativeSocketEnginePrivate::BroadcastingInitFailedErrorString);
